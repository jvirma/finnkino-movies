(this["webpackJsonpfinnkino-app"]=this["webpackJsonpfinnkino-app"]||[]).push([[0],{131:function(e,t){},133:function(e,t){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),s=a.n(c),o=a(5),u=a.n(o),i=a(11),l=a(85),f=a(86),m=a(92),p=a(91),h=a(37),d=a(172),g=a(170),v=a(59),E=a.n(v),w=a(30),x=a.n(w),S=a(116),b="https://www.finnkino.fi/xml",k=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(b,"/TheatreAreas"));case 3:return t=e.sent,a=new S.Parser,n=a.parseStringPromise(t.data).then((function(e){return e.TheatreAreas.TheatreArea.shift(),e.TheatreAreas.TheatreArea})).catch((function(e){})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(b,"/ScheduleDates/?area=").concat(t));case 3:return a=e.sent,n=new S.Parser,r=n.parseStringPromise(a.data).then((function(e){return e.Dates.dateTime})).catch((function(e){})),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(u.a.mark((function e(t,a){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(b,"/Schedule/?area=").concat(t,"&dt=").concat(a));case 3:return n=e.sent,r=new S.Parser,c=r.parseStringPromise(n.data).then((function(e){return e.Schedule.Shows[0].Show})).catch((function(e){})),e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("".concat(b,"/Events/"));case 3:return t=e.sent,a=new S.Parser,n=a.parseStringPromise(t.data).then((function(e){return console.log(e.Events.Event),e.Events.Event})).catch((function(e){})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),y=function(e){var t=e.handleAreaChange,a=Object(n.useState)([]),c=Object(h.a)(a,2),s=c[0],o=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,k();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[o]),r.a.createElement(d.a,{className:E.a.formControl},r.a.createElement(g.a,{defaultValue:"",classes:{root:E.a.formPadding},onChange:function(e){return t(e.target.value)}},s.map((function(e){return r.a.createElement("option",{key:e.ID,value:e.ID}," ",e.Name)}))))},O=a(60),P=a.n(O),C=a(84).formatDate,A=function(e){var t=e.dates,a=e.handleDateChange;return r.a.createElement(d.a,{className:P.a.formControl},r.a.createElement(g.a,{defaultValue:"",classes:{root:P.a.formPadding},onChange:function(e){return a(e.target.value)}},t?t.map((function(e,t){return r.a.createElement("option",{key:t,value:C(e)}," ",C(e))})):""))},I=a(166),T=a(173),L=a(167),N=a(168),B=a(169),M=a(171),F=a(38),J=a.n(F),G=function(e){var t=e.schedules,a=Object(n.useState)([]),c=Object(h.a)(a,2),s=c[0],o=c[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,j();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log(s),r.a.createElement("div",{className:J.a.container},t?t.map((function(e,t){return r.a.createElement(I.a,{item:!0,mb:2,component:T.a,xs:12,className:J.a.card,key:t},e.Images[0].EventLargeImageLandscape?r.a.createElement(L.a,{className:J.a.media,image:e.Images[0].EventLargeImageLandscape.toString()}):"",r.a.createElement(N.a,null,r.a.createElement(B.a,{style:{marginBottom:15},variant:"h5"},e.Title," (",e.ProductionYear,") "),r.a.createElement(B.a,{style:{marginBottom:15}},s.filter((function(t){return t.ID.toString()===e.EventID.toString()}))[0].ShortSynopsis),r.a.createElement(B.a,null,e.LengthInMinutes," min, ",e.PresentationMethodAndLanguage),r.a.createElement(B.a,null,e.TheatreAndAuditorium),r.a.createElement(B.a,{style:{marginBottom:15}},"Alkaa klo ",new Date(e.dttmShowStart).toLocaleTimeString("fi-FI",{hour:"2-digit",minute:"2-digit"})),r.a.createElement(M.a,{mt:4,variant:"contained",href:e.ShowURL.toString(),target:"_blank"},"Osta liput")))})):"")},R=a(61),V=a.n(R),Y=a(84).formatDate,Q=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={areaID:"1029",dates:[],selectedDate:"",schedules:[]},e.handleAreaChange=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({areaID:a}),t.next=3,D(a);case 3:if(n=t.sent,e.setState({dates:n}),!n){t.next=14;break}return e.setState({selectedDate:Y(n[0])}),t.next=9,_(a,Y(n[0]));case 9:r=t.sent,e.setState({schedules:r}),console.log(e.state),t.next=16;break;case 14:e.setState({selectedDate:""}),e.setState({schedules:[]});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDateChange=function(){var t=Object(i.a)(u.a.mark((function t(a){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedDate:a}),n=e.state.areaID,t.next=4,_(n,a);case 4:r=t.sent,e.setState({schedules:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.areaID,e.next=3,D(t);case 3:return a=e.sent,this.setState({dates:a}),this.setState({selectedDate:Y(a[0])}),e.next=8,_(t,Y(a[0]));case 8:n=e.sent,this.setState({schedules:n});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.dates,a=e.schedules;return r.a.createElement("div",{className:V.a.container},r.a.createElement(I.a,{container:!0,spacing:3,justify:"center"},r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(I.a,{item:!0,component:T.a,xs:12},r.a.createElement(N.a,null,r.a.createElement(B.a,{variant:"h2",className:V.a.padding},"Finnkinon ohjelmisto")))),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(y,{handleAreaChange:this.handleAreaChange})),r.a.createElement(I.a,{item:!0,xs:6},r.a.createElement(A,{dates:t,handleDateChange:this.handleDateChange})),r.a.createElement(I.a,{item:!0,xs:12},r.a.createElement(G,{schedules:a}))))}}]),a}(r.a.Component);s.a.render(r.a.createElement(Q,null),document.getElementById("root"))},38:function(e,t,a){e.exports={card:"Cards_card__3GsQS",media:"Cards_media__3oRnM"}},59:function(e,t,a){e.exports={formControl:"AreaPicker_formControl__32rBx",formPadding:"AreaPicker_formPadding__1nPwO"}},60:function(e,t,a){e.exports={formControl:"DatePicker_formControl__1olos",formPadding:"DatePicker_formPadding__2m8BI"}},61:function(e,t,a){e.exports={container:"App_container__13J7G",padding:"App_padding__1b_fu"}},84:function(e,t){t.formatDate=function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[n,a,r].join(".")}},94:function(e,t,a){e.exports=a(147)}},[[94,1,2]]]);
//# sourceMappingURL=main.78aa497d.chunk.js.map